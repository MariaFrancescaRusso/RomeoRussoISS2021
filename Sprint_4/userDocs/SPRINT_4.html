<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<link rel="stylesheet" type="text/css" href="./utils/style.css">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<base href=".">
<title>RomeoRussoStandingBuffetService</title>
</head>

<body>

<div id="top">
<h1>SPRINT 4 - STANDING BUFFET SERVICE | Ingegneria dei Sistemi Software</h1>
</div>

<div class="body">

<h2>Introduction</h2>

The starting point for this SPRINT is the resulting model from the <a href="../../Sprint_3/SPRINT_3/userDocs/SPRINT_3.html#Sprint3Mod" target="_blank">previous Sprint 3</a>:
<br><br>
<table>
<tr class="text">
	<th>Machine Understandable Architecture Model</th>
	<th>A Possible Graphic Representation</th>
</tr>
<tr>
	<td class="text">
		Sprint 3 <a href="../../Sprint_3/SPRINT_3/src/model.qak" target="_blank">model.qak</a><br>
		<pre><iframe class="qakSprint3" src="../../Sprint_3/SPRINT_3/src/model.qak" title="Sprint_3_Model">Model of Sprint 3</iframe></pre>
	</td>
	<td class="imageSchema">
		<img src="../../Sprint_3/SPRINT_3/userDocs/utils/img/ModelSprint3_Legend.svg" alt="Legend of the Logical Architecture System Model from Sprint 3"><br>
		<img src="../../Sprint_3/SPRINT_3/userDocs/utils/img/ModelSprint_3.svg" alt="Logical Architecture System Model from Sprint 3">
	</td>
</tr>
</table>

<h2>Goal</h2>

<div class="remark">
<ol>
	<li>Deploy on <tt>Raspberry</tt></li>
	<li><ks>Prepare the room</ks> <ks>task</ks>: execution by the <tt>real robot</tt></li>
	<li><ks>Add Food</ks> <ks>task</ks>: execution by the <tt>real robot</tt></li>
	<li><ks>Clear the room</ks> <ks>task</ks>: execution by the <tt>real robot</tt></li>
</ol>
</div>

<h2><a name="PrAn_Sprint4"></a>Problem Analysis</h2>

<h3>Deploy on Raspberry</h3>

Before doing the deploy on <tt>Raspberry</tt>, it's necessary to split the project (<a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_3/SPRINT_3" target="_blank">SPRINT_3</a>) realized in previous sprint (<a href="../../Sprint_3/SPRINT_3/userDocs/SPRINT_3.html" target="_blank">Sprint_3.html</a>) in more little projects to can put them in different machine as indicated in the <a href="../../ProblemAnalysisModel/userDocs/utils/tf/TemaFinaleBo19.html" target="_blank">requirements text</a> (a software in the <ks>fridge</ks>, one in the <ks>maître's smartphone</ks> and one in the <ks>RBR</ks>).<br>

<h4>Project Partitioning</h4>

Therefore, it could split the project in three parts, one for each <tt>context</tt> identified in <a href="../../userDocs/Analysis.html" target="_blank">requirements and problem analysis phase and in previous sprints</a>; so, for example:
<ul>
	<li>a project for the <tt>context</tt> <k>ctxmaitre</k> containing <k>maitre</k>, <k>foodconsumer</k> and  non-smart resources <tt>actors</tt> (<k>pantry</k>, <k>table</k>, <k>dishwasher</k>);</li>
	<li>a project or the <tt>context</tt> <k>ctxrbr</k> containing containing <k>rbr</k>, <k>rbrmapper</k> and <k>rbrwalker</k> <tt>actors</tt>;</li>
	<li>a project or the <tt>context</tt> <k>ctxfridge</k> containing <k>fridge</k> <tt>actor</tt>.</li>
</ul>
In this way, the relations between <tt>actors</tt> and <tt>context</tt> remains the same as in previous sprints.

<h4>Deploy on Raspberry</h4>

Identified this project? partitioning/subdivision, then it must make the deploy of/deploy the project related to the <k>ctxrbr</k> in the <tt>Raspberry</tt>, putting in it also the <k>basicrobot</k>.<br>
It could also put/make the deploy only of the <k>basicrobot</k>, but to separate at best the <tt>contexts</tt>/ to exploit at best the messages exchange between <k>basicrobot</k> and <k>ctxrbr</k> <tt>actors</tt> which are more performant in local/on the same host/machine and in base of what said in previous sprints??, it seem to be more usefull/appropriate to put them all in the <tt>Raspberry</tt>.

<h2>Test Plans</h2>

With reference to the <a href="../../../ProblemAnalysisModel/userDocs/Analysis.html#PrAnTestPlans" target="_blank">initial problem analysis test plans</a>, below it's reported a functional tests planning related to the goal of this sprint:
<br><br>
<ul>
	<li>Tests of all the communications between entities.</li>
	<li>inseriamo sennó ad esempio: all previous goal plan tests/ all previous tests made with real robot??????</li>
</ul>
<br>
Of course, some test about the behavior of the real robot and of all the system with the real robot to verify the goals identified in the analysis phase could be done.
<br><br>
Because of the project has been finished in previous sprint, in this sprint it is not necessary to execute/do tests, except for the communications between the different contexts and so between the different machine containing them.

<h2>Project</h2>

With regard to the <a href="./SPRINT_4.html#PrAn_Sprint4">problem analysis about this sprint</a>, in this design phase it has been necessary to split the previous project (<a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_3/SPRINT_3" target="_blank">SPRINT_3</a>) in three part/partition:
<ol>
	<li><a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/maitreNode" target="_blank">maitreNode</a>, which contains <k>ctxmaitre</k> <tt>actors</tt>/ which is refered to the <k>ctxmaitre</k> and contains <k>maitre</k>, <k>foodconsumer</k> and  non-smart resources <tt>actors</tt> (<k>pantry</k>, <k>table</k>, <k>dishwasher</k>) and the <tt>observers</tt> related to these resources <tt>actors</tt>??;</li>
	<li><a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/rbrNode" target="_blank">rbrNode</a>, which contains <k>ctxrbr</k> <tt>actors</tt>/ which is refered to the <k>ctxrbr</k> and contains <k>rbr</k>, <k>rbrmapper</k> and <k>rbrwalker</k> <tt>actors</tt>;</li>
	<li><a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/fridgeNode" target="_blank">fridgeNode</a>, which contains <k>ctxfridge</k> <tt>actors</tt>/ which is refered to the <k>ctxfridge</k> and contains <k>fridge</k> <tt>actor</tt>.</li>
</ol>
<br>
To solve the goal of this sprint, it has been done the deploy of each identified project/of each of these projects and of the <tt>GUI</tt> project (<a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/maitreGUI" target="_blank">maitreGUI</a>) exploiting/using/through the use of <tt>Docker</tt>; for the deploy on the <tt>Raspberry</tt> it has been done the deploy of the <a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/rbrNode" target="_blank">rbrNode</a> project and of the <k>basicrobot</k>. (For the use of/for the deploy with <tt>Docker</tt>, it could be useful see [LINK]).

<h3>Deploy MaitreNode</h3>

To make possible the deploy of the <a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/maitreNode" target="_blank">maitreNode</a> on the <tt>Raspberry</tt> it has been created exploiting/using/through the use of <tt>Docker</tt> a container/ a <tt>Docker</tt> container related to/for this project. In particular, in a terminal opened in the project folder, it has been:
<pre>
<span class="commentCode">// - done the build /created the distribution of this/the project</span>
gradle -b build_ctxmaitre.gradle build
<span class="commentCode">// - created the image using the <a href="../maitreNode/Dockerfile" target="_blank"><span class="commentCode">Dockerfile</span></a><a href="../maitreNode/Dockerfile" target="_blank">Dockerfile</a></span>
docker build -f Dockerfile -t maitrenode:1.1 .
<span class="commentCode">// runned the image to test it (not/non- necessary step)</span>
docker run -d --name maitrenode -p 8070:8070/tcp -p 8070:8070/udp maitrenode:1.1
<span class="commentCode">// tagged the image</span>
docker tag maitrenode:1.1 bluffgnuff/maitrenode:1.1
<span class="commentCode">// registered the image on <a href="https://hub.docker.com/?ref=login" target="_blank">DockerHub</a></span>
docker push bluffgnuff/maitrenode:1.1
</pre>
To launch the <a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/maitreNode" target="_blank">maitreNode</a> it has been created the maitrenode.yaml file.

<br><hr><br>

To make possible the deploy of the <a href="https://github.com/bluffgnuff/RomeoRussoISS2021/tree/master/Sprint_4/maitreNode" target="_blank">maitreNode</a> on the <tt>Raspberry</tt> it has been created exploiting/using/through the use of <tt>Docker</tt> a container/ a <tt>Docker</tt> container related to/for this project. In particular:
<br><br>
<ol>
	<li>it has been done the build /created the distribution of this/the project:<br>
		<pre>gradle -b build_ctxmaitre.gradle build</pre></li>
	<li>it has been created the image using the Dockerfile (link):<br>
		<pre>docker build -f Dockerfile -t maitrenode:1.1 .</pre></li>
	<li>it has been runned the image to test it:<br>
		<pre>docker run -d --name maitrenode -p 8070:8070/tcp -p 8070:8070/udp maitrenode:1.1</pre></li>
	<li>it has been tagged the image:<br>
		<pre>docker tag maitrenode:1.1 bluffgnuff/maitrenode:1.1</pre></li>
	<li>it has been registered the image on DockerHub (link):<br>
		<pre>docker push bluffgnuff/maitrenode:1.1</pre></li>
</ol>
To launch the maitreNode it has been created the maitrenode.yaml file.

<h3>Deploy RBRNode</h3>

To make possible the deploy of the maitreNode on the <tt>Raspberry</tt> it has been created exploiting/using/through the use of Docker a container/ a Docker container related to/for this project. In particular:
<br><br>
<ol>
	<li>it has been done the build /created the distribution of this/the project:<br>
		<pre>gradle -b build_ctxrbr.gradle build</pre></li>
	<li>it has been created the image using the DockerfileOnRasp (link):<br>
		<pre>docker build -f DockerfileOnRasp -t rbrnode:1.1 .</pre></li>
	<li>it has been runned the image to test it:<br>
		<pre>docker run -d --name rbrnode -p 8050:8050/tcp -p 8050:8050/udp rbrnode:1.1</pre></li>
	<li>it has been tagged the image:<br>
		<pre>docker tag rbrnode:1.1 bluffgnuff/rbrnode:1.1</pre></li>
	<li>it has been register the image on DockerHub:<br>
		<pre>docker push bluffgnuff/rbrnode:1.1</pre></li>
</ol>
To launch the rbrNode it has been created the rbrnodeOnRasp.yaml file.
<br><br>
For the rbrNode project it has also been create a container Docker to deploy it on PC:
<br><br>
<ol>
	<li>it has been done the build /created the distribution of this/the project:<br>
		<pre>gradle -b build_ctxrbr.gradle build</pre></li>
	<li>it has been created the image using the DockerfileOnPC (link):<br>
		<pre>docker build -f DockerfileOnPC-t rbrnode_on_pc:1.1 .</pre></li>
	<li>it has been runned the image to test it:<br>
		<pre>docker run -d --name rbrnode_on_pc -p 8050:8050/tcp -p 8050:8050/udp rbrnode_on_pc:1.1</pre></li>
	<li>it has been tagged the image:<br>
		<pre>docker tag rbrnode_on_pc:1.1 bluffgnuff/rbrnode_on_pc:1.1</pre></li>
	<li>it has been register the image on DockerHub:<br>
		<pre>docker push bluffgnuff/rbrnode_on_pc:1.1</pre></li>
</ol>

<h3>Deploy BasicRobot</h3>

To do the deploy of the basicrobot on the <tt>Raspberry</tt> (useful is the part related to the deploy of the real robot in basicrobot2021.html), in particular:
<br><br>
<ol>
	<li>it has been saved the file basicrobotMbot.yaml on <tt>Raspberry</tt>:<br>
		<pre>scp -r ./issLab2021/it.unibo.qak21.basicrobot pi@192.168.1.93:/home/pi/it.unibo.qak21.basicrobot</pre></li>
	<li>it has been runned the container:<br>
		<pre>docker-compose -f basicrobotMbot.yaml run --service-ports mbot ./it.unibo.qak21.basicrobot</pre></li>
	<li>it has been configured the correct jsno file (basicrobotConfigForNano.json):<br>
		<pre>docker exec -it nome_container mv basicrobotConfigForNano.json basicrobotConfig.json</pre></li>
	<li>it has been setted up that the container starts at <tt>Raspberry</tt> boot:<br>
		<pre>docker update --restart always nome_container</pre></li>
</ol>

<h3>Deploy FridgeNode</h3>

To make possible the deploy of the maitreNode on the <tt>Raspberry</tt> it has been created exploiting/using/through the use of Docker a container/ a Docker container related to/for this project. In particular:
<br><br>
<ol>
	<li>it has been done the build /created the distribution of this/the project:<br>
		<pre>gradle -b build_ctxfridge.gradle build</pre></li>
	<li>it has been created the image using the Dockerfile (link):<br>
		<pre>docker build -f Dockerfile -t fridgenode:1.1 .</pre></li>
	<li>it has been runned the image to test it:<br>
		<pre>docker run -d --name fridgenode -p 8060:8060/tcp -p 8060:8060/udp fridgenode:1.1</pre></li>
	<li>it has been tagged the image:<br>
		<pre>docker tag fridgenode:1.1 bluffgnuff/fridgenode:1.1</pre></li>
	<li>it has been registered the image on DockerHub:<br>
		<pre>docker push bluffgnuff/fridgenode:1.1</pre></li>
</ol>
To launch the fridgeNode it has been created the fridgenode.yaml file.

<h3>Deploy MaitreGUI</h3>

To make possible the deploy of the maitreNode it has been created exploiting/using/through the use of Docker a container/ a Docker container related to/for this project. In particular:
<br><br>
<ol>
	<li>it has been done the build /created the distribution of this/the project:<br>
		<pre>gradle -b build_ctxmaitre.gradle build</pre></li>
	<li>it has been created the image using the Dockerfile (link):<br>
		<pre>docker build -f Dockerfile -t maitrenode:1.1 .</pre></li>
	<li>it has been runned the image to test it:<br>
		<pre>docker run -d --name maitrenode -p 8070:8070/tcp -p 8070:8070/udp maitrenode:1.1</pre></li>
	<li>it has been tagged the image:<br>
		<pre>docker tag maitrenode:1.1 bluffgnuff/maitrenode:1.1</pre></li>
	<li>it has been register the image on DockerHub:<br>
		<pre>docker push bluffgnuff/maitrenode:1.1</pre></li>
</ol>
To launch the maitreGUI it has been created the maitreGui.yaml file.

<h2>Testing</h2>

Because of the project has been finished in previous sprint, in this sprint it is not necessary to execute/do tests, except for the communications between the different contexts and so between the different machine containing them.
<br><br>
In this sprint there are not made relevant?? tests because the goal of this sprint is about its deploy and because of the goals individuated during the analysis phases have been solved in previous sprint.
<br><br>
To test the communications between all the system cpmponents, this can be verified visually by sending command through the maitreGUI and osserving the real robot running the commands or the received output for the/about the consult command.

<h2><a name="Sprint4Mod"></a>Model of System's Logical Architecture</h2>

<table>
<tr class="text">
	<th>Machine Understandable Architecture Model</th>
	<th>A Possible Graphic Representation</th>
</tr>
<tr>
	<td class="text">
		<br>Sprint 4 - maitreNode <a href="../maitreNode/src/model.qak" target="_blank">model.qak</a><br>
		<pre><iframe class="qakSprint4" src="../maitreNode/src/model.qak" title="ModelSprint_4_maitreNode">Model of Sprint 4 - project maitreNode</iframe></pre>
		<hr><br>
		Sprint 4 - rbrNode <a href="../rbrNode/src/model.qak" target="_blank">model.qak</a><br>
		<pre><iframe class="qakSprint4" src="../rbrNode/src/model.qak" title="ModelSprint_4_rbrNode">Model of Sprint 4 - project rbrNode</iframe></pre>
		<hr><br>
		Sprint 4 - fridgeNode <a href="../fridgeNode/src/model.qak" target="_blank">model.qak</a><br>
		<pre><iframe class="qakSprint4" src="../fridgeNode/src/model.qak" title="ModelSprint_4_fridgeNode">Model of Sprint 4 - project fridgeNode</iframe></pre>
	</td>
	<td class="imageSchema">
		<img src="../../Sprint_3/SPRINT_3/userDocs/utils/img/ModelSprint3_Legend.svg" alt="Legend of the Logical Architecture System Model from Sprint 4"><br>
		<img src="../../Sprint_3/SPRINT_3/userDocs/utils/img/ModelSprint_3.svg" alt="Logical Architecture System Model from Sprint 4">
	</td>
</tr>
</table>

<h2>Deployment</h2>

To start/launch the containers related to the basicrobot and to the rbrNode project, as said in the project phase, it is necessary / suffieciente to starts/boot the raspberry. [Otherwise...]
<br><br>
To start the container related to the fridgeNode project it must be run in a terminal (in the folder containing the fridgenode.yaml file):
<pre>docker-compose -f fridgenode.yaml up</pre>
To start the container related to the maitreNode project it must be run in a terminal (in the folder containing the maitrenode.yaml file):
<pre>docker-compose -f maitrenode.yaml up</pre>
To start the container related to the maitreGUI it must be run in a terminal (in the folder containing the maitreGui.yaml file):
<pre>docker-compose -f maitreGui.yaml up</pre>

<br><br>




<div hidden="hidden">

<h2>SCRUM Context</h2>

<h3>SPRINT Sequence</h3>

<h2>Maintenance</h2>
</div>

</div>
<br><br>
<div class="endpage">
By Romeo Stefano (stefano.romeo@studio.unibo.it) and Russo Maria (maria.russo10@studio.unibo.it)<br>
<img class="photo" src="../../../userDocs/utils/img/StefanoRomeo.png" alt="Stefano Romeo image">
<img class="photo" src="../../../userDocs/utils/img/MariaRusso.png" alt="Maria Russo image">
</div>

</body>
</html>
